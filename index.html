<!DOCTYPE html>
<html lang="zh-CN" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Album</title>

    <!-- 引用GSAP TailwindCss Lucide -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

    <script src="https://unpkg.com/lucide@latest"></script>

    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <link rel="stylesheet" href="./css/style.css">
</head>
<body class="antialiased seletion:bg-[#ccff00] seletion:text-black bg-[#0a0a0a] text-[#f0f0f0]" style="overflow: hidden;">
    <!-- 背景音乐-->
    <audio id="bg-music" loop>
        <source src="https://pub-af017771c2664a4390128eab2bdd6fee.r2.dev/musicbucket/Esperanza-Hermanos%20Gutierrez.mp3" type="audio/mpeg">
        您的浏览器不支持 audio 元素。
    </audio>
    <!-- 用户中心书签 -->
    <div id="user-bookmark" class="bookmark-btn hoverable" data-cursor="link">
        <i data-lucide="circle-user" class="w-6 h-6"></i>
    </div>
    <!-- 音乐控制书签 -->
    <div id="music-bookmark" class="bookmark-btn hoverable" data-cursor="link">
        <i data-lucide="music" class="w-6 h-6"></i>
    </div>    
    <!-- 上传书签 -->
    <div id="upload-bookmark" class="bookmark-btn hoverable" data-cursor="link">
        <i data-lucide="cloud-upload" class="w-6 h-6"></i>
    </div>
    
    <!-- 用户全屏中心 (原侧边栏) -->
    <div id="user-home" class="fixed inset-0 w-full h-full bg-[#0a0a0a] z-[10002] transform translate-x-full transition-transform duration-500 cubic-bezier(0.22,1,0.36,1) flex flex-col overflow-y-auto">
        <div class="w-full mx-auto flex flex-col p-8 md:p-12 min-h-full max-w-[1200px]">
            <!-- 用户页标题 -->
            <div class="flex justify-between items-center mb-4">
                <h2 id="sidebar-title" class="text-4xl md:text-5xl font-black text-white tracking-tighter uppercase">用户中心</h2>
                <button id="close-sidebar" class="text-gray-500 hover:text-[#ccff00] transition-colors hoverable p-2" data-cursor="link">
                    <i data-lucide="X" class="w-10 h-10"></i>
                </button>
            </div>
            <!-- 登录注册区域 -->
            <div id="auth-container" class="flex-1 flex flex-col justify-center w-full transition-opacity duration-300">
                <div id="login-form-content" class="max-w-lg mx-auto w-full">
                    <div class="mb-12">
                        <h3 id="auth-mode-tile" class="text-4xl font-bold text-white mb-4 tracking-tighter">欢迎回来</h3>
                        <p class="text-gray-400 text-lg">请登录以访问您的个人空间/分享您的图片</p>
                    </div>
                    <!-- 用户输入 -->
                    <div class="space-y-8">
                        <div class="group">
                            <label class="block text-sm text-gray-500 uppercase tracking-widest mb-3 group-focus-within:text-[#ccff00] transition-colors">电子邮箱</label>
                            <input type="email" id="auth-email" class="w-full bg-transparent border-b-2 border-[#333] py-4 text-white text-xl outline-none focus-border-[#ccff00] transition-colors font-medium placeholder-gray-700" placeholder="your@email.com">
                        </div>

                        <div class="group">
                            <label class="block text-sm text-gray-500 uppercase tracking-widest mb-3 group-focus-within:text-[#ccff00] transition-colors">密码</label>
                            <input type="password" id="auth-password" class="w-full bg-transparent border-b-2 border-[#333] py-4 text-white text-xl outline-none focus-border-[#ccff00] transition-colors font-medium placeholder-gray-700" placeholder="········">
                        </div>
                    </div>

                    <div id="auth-error-msg" class="text-red-500 text-sm mt-6 hidden">错误信息</div>
                    <!-- 登录按钮 -->
                    <button id="auth-action-btn" class="w-full bg-white text-black font-bold text-xl py-5 mt-12 hover:bg-[#ccff00] transition-colors uppercase tracking-widest hoverable" data-cursor="link">
                        <span id="auth-btn-text">登录</span>
                        <span id="auth-loading" class="hidden">
                            <i data-lucide="loader-2" class="w-7 h-8 animate-soin mx-auto"></i>
                        </span>

                    </button>
                    <!-- 切换注册/登录状按钮 -->
                    <div class="mt-8 text-center text-sm text-gray-500 uppercase tracking-widest">
                        <span id="auth-switch-text">还没有账号?</span>
                        <button id="auth-switch-btn" class="text-[#ccff00] hover:underline ml-2 hoverable font-bold" data-cursor="link">去注册</button>
                    </div>
                </div>
                <!-- 用户个人信息区域，登录后出现 -->
                <div id="user-profile-content" class="hidden w-full flex-col">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-end mb-4 gap-6">
                        <div class="flex items-center gap-6">
                            <!-- 用户头像 -->
                            <div class="relative group cursor-pointer hoverable w-20 h-20 md:w-24 md:h-24 flex-shrink-0" id="avatar-container" data-cursor="link">
                                <img id="user-avatar" src="./res/tempUserAvatar.jpg" class="w-full h-full rounded-full object-cover border-2 border-[#333] group-hover:border-[#ccff00] transition-colors">
                            
                                <div class="absolute inset-0 bg-black/60 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                                    <i data-lucide="camera" class="w-6 h-6 text-white"></i>
                                </div>

                                <input type="file" id="avatar-input" class="hidden" accept="image/*">
                            </div>
                            <!-- 用户昵称 -->
                            <div class="flex  flex-col">

                                <div class="flex items-center gap-3 mb-1 group">
                                    <h3 id="user-nickname-display" class="text-2xl md:text-4xl font-bold text-white tracking-tighter cursor-pointer hover:text-[#ccff00] transition-colors hoverable" data-cursor="text" title="点击编辑昵称">未命名用户</h3>

                                    <input type="text" id="user-nickname-input" class="hidden bg-transparent border-b-2 border-[#ccff00] text-2xl md:text-4xl font-bold font-bold text-[#ccff00] outline-none w-48 md:w-64" value="未命名用户">
                                    <i data-lucide="edit-2" class="w-4 h-4 text-gray-600 group-hover:text-gray-400 transition-colors opacity-0 group-hover:opacity-100"></i>
                                </div>

                            </div>
                            <!-- 用户邮箱显示后期替换成uid -->
                            <p class="text-sm text-gray-500 font-mono" id="user-email-display">user@example.com</p>

                        </div>
                    </div>
                    <!-- 登出按钮 -->
                    <button id="logout-btn" class="text-xs uppercase tracking-widest text-gray-500 hover:text-white transition-colors hoverable px-4 py-2 border border-[#333] hover:border-white rounded-full" data-cursor="link">退出登录</button>
                    <!-- 分割线与标签 -->
                    <div class="relative flex items-center justify-center w-full my-8">

                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-[#333]"></div>

                        </div>
                
                        <div class="relative bg-[#0a0a0a] px-6 flex gap-8">
                            <button id="tab-works" class="text-sm font-bold uppercase tracking-widest hover:text-[#ccff00] transition-colors tab-active hoverable" data-cursor="link">我的作品</button>
                            <!-- 可拓展更多个人页功能 -->
                        </div>
                    </div>
                    <!-- 用户个人画廊 -->
                    <div id="user-gallery-section" class="w-full">
                        <div id="user-gallery-grid" class="columns-1 md:columns-2 gap-6 space-y-6 w-full pb-24">
                            <!-- 代码生成 -->
                        </div>

                        <div id="empty-state" class="text-center py-24 text-gray-600 hidden">
                            <div class="w-20 h-20 rounded-full bg-[#111] flex items-center justify-center mx-auto mb-4 border border-[#333]">

                                <i data-lucide="image" class="w-8 h-8 opacity-50"></i>
                            </div>

                            <p class="uppercase tracking-widest text-xs">暂无上传作品</p>
                            <p class="text-xs text-gray-700 mt-2">点击左侧云朵图标上传</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
           
    
    <div id="upload-modal" class="fixed inset-0 z-[10005] modal-hidden flex items-center justify-center p-4">
        
        <div class="bg-[#111] border border-[#333] p-8 w-full max-w-lg relative">
            
            <button id="close-upload-modal" class="absolute top-4 right-4 text-gray-500 hover:text-[#ccff00] transition-colors hoverable" data-cursor="link">
                <i data-lucide="X" class="w-6 h-6"></i>

            </button>

            <h3 class="text-2xl font-bold text-white mb-6 uppercase tracking-tighter">上传作品</h3>
            
            <div class="upload-zone w-full h-64 flex flex-col justify-center items-center cursor-pointer hoverable mb-6 relative overflow-hidden" id="drop-zone" data-cursor="link">
                
                <input type="file" id="file-input" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10" accept="image/*">
                
                <div id="upload-placeholder" class="text-center pointer-events-none">
                    <i data-lucide="image-plus" class="w-12 h-12 text-gray-600 mx-auto mb-4"></i>
                    <p class="text-gray-400">点击图片拖拽到此处</p>

                </div>

                <img id="preview-image" src="" class="absolute inset-0 w-full h-full object-cover hidden pointer-events-none">
            </div>

            <div class="space-y-4">

                <input type="text" id="upload-title" class="w-full bg-transparent border-b border-[#333] py-2 text-white outline-none focus:border-[#ccff00] transition-colors placeholder-gray-700" placeholder="作品标题">

                <button id="confirm-upload-btn" class="w-full bg-white text-black font-bold py-3 hover:bg-[#ccff00] transition-colors uppercase tracking-widest hoverable" data-cursor="link">确认发布</button>
            </div>
        </div>
    </div>

    <!-- 虚拟光标 -->
    <div id="cursor"></div>
    <div id="cursor-dot"></div>
    <!-- 加载页 -->
    <div id="loader">
         <div class="loader-curtain top"></div>
         <div class="loader-curtain bottom"></div>

         <div id="loader-text-wrapper">
            <div class="loader-brand outline">Album.</div>

            <div class="loader-brand-mask" id="loader-mask">
                <div class="loader-brand filled">Album.</div>
            </div>
         </div>

         <div class="loader-percent" id="loader-percent">0%</div>
    </div>

    <!-- 导航栏 -->
    <nav class="fixed w-full z-50 px-8 py-6 flex justify-between items-center mix-blend-difference text-[#ccff00] pointer-events-none md:pointer-events-auto">
        <div id="nav-logo" class="text-2xl font-black tracking-tighter hoverable opacity-0" data-cursor="link">Album.</div>

        <div class="hidden md:flex gap-8 text-sm font-medium tracking-widest uppercase absolute left-1/2 -translate-x-1/2 pointer-events-auto">
            <a href="#" class="hover:underline hoverable" data-cursor="link">首页</a>
            <a href="#gallery-start" class="hover:underline hoverable" data-cursor="link">展览</a>
            <a href="#originator-section" class="hover:underline hoverable" data-cursor="link">作者</a>
        </div>
    </nav>

    <header class="relative min-h-screen flex flex-col justify-center items-center px-4 overflow-hidden">
        <div class="absolute inset-0 opacity-10 pointer-events-none">
            <!-- 生成噪点 -->
            <svg width="100%" height="100%">
                <filter id="noise">
                    <feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="3" stitchTiles="stitch"></feTurbulence>
                </filter>
                <rect width="100%" height="100%" filter="url(#noise)"></rect>
            </svg>
        </div>
        <!-- 大标题 -->
        <div class="z-10 text-center space-y-4">
            <p class="text-[#ccff00] text-sm uppercase tracking-[0.3em] animate-fade-in">视觉探索 / Vol.01</p>
            <h1 class="text-[12vw] leading-[0.85] font-black uppercase tracking-tighter">
                <span class="block outline-text hoverable " data-cursor="text">发现</span>
                <span class="block text-[#ccff00] hoverable" data-cursor="text">视觉相册</span>
            </h1>
        </div>       
        <!-- 脚注 -->
        <div class="absolute bottom-12 left-0 w-full flex justify-between px-8 text-xs text-gray-500 uppercase tracking-widest">
            <span>向下滚动探索</span>
            <span>(2025)</span>
        </div>
    </header>
    <div class="w-full py-12 border-y border-[#333] overflow-hidden whitespace-nowrap bg-[#0a0a0a]">
        <div class="inline-block" id="marquee-content">
            <!-- Js代码生成 -->
        </div>
    </div>

    <main class="max-w-[1600px] mx-auto px-4 py-24">
        
        <!-- 画廊区域 -->
        <div id="gallery-start" class="scroll-mt-32"></div>
        <div class="flex justify-between items-end mb-16 px-4">
            <h2 class="text-4xl md:text-6xl font-bold text-white">精选作品</h2>
        </div>

        <div class="columns-1 md:columns-2 lg:columns-3 gap-8 space-y-8 mb-48" id="gallery-grid">
            <!-- Js代码生成 -->
        </div>
        
        <!-- 作者卡片 -->
        <div id="originator-section" class="scroll-mt-32 mt-32">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-end mb-16 px-4 border-b border-[#333] pb-8">
                <h2 class="text-4xl md:text-6xl font-bold text-white uppercase">作者</h2>
            </div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 px-4" id="artist-grid">
            <!-- Js代码生成 -->
        </div>
    </main>
    
    <!-- 脚注 -->
    <footer class="border-t border-[#333] py-24 px-8 mt-24 bg-[#050505]">
        <div class="max-w-[1600px] mx-auto flex flex-col md:flex-row justify-between items-start md:items-end gap-12">

            <div>
                <h3 class="text-[8vw] font-bold text-[#ccff00] leading-none tracking-tighter hoverable" data-cursor="text">再见</h3>
                <p class="text-gray-400 mt-4 max-w-md">用无与伦比的图片释放您的创造力</p>
            </div>
        </div>
    </footer>
    
    <!-- 模态框 -->
    <div id="modal" class="fixed inset-0 z-[10002] modal-hidden flex items-center justify-center p-4 md:p-12">
        <button id="close-modal" class="absolute top-8 right-8 text-white hover:text-[#ccff00] z-[10003] hoverable" data-cursor="link">
            <i data-lucide="X" class="w-10 h-10"></i>
        </button>

        <div class="relative max-w-full max-h-full overflow-hidden rounded-sm shadow-2xl">

            <img id="modal-img" src="" alt="Full view" class="max-w-full max-h-[90vh] object-contain">

            <div class="absolute bottom-0 left-0 w-full bg-black/80 p-6 backdrop-blur-sm" id="modal-caption-box">
                <h3 class="text-[#ccff00] text-xl font-bold" id="modal-title">作品标题</h3>
                <p class="text-gray-300 text-sm mt-1" id="modal-desc">作者 / 2025</p>
            </div>
        </div>
    </div>
    <script src="./js/script.js"></script>
    <script src="./js/auth.js"></script>
</body>
</html>


